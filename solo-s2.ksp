import "import/Const.ksp"on init    {#pragma save_compiled_source solo-s2.txt}    Const_on_init()    set_script_title("S2")    make_perfview    set_ui_height_px(300)    message("test")    family UI2        declare ui_table pitchTable[Const.pitchTableColumnCount] (20,20,-1000)         declare ui_knob pitchTimeLength(2, 100, 10)        declare ui_knob pitchRange(100, 800, 100)        declare ui_button pitchTableSmooth        declare ui_button pitchTableReset        declare ui_button pitchTableApply    end family    declare pitchTableIndex := 0        move_control_px(UI2.pitchTable,20,50)    set_control_par(get_ui_id(UI2.pitchTable),$CONTROL_PAR_WIDTH,580)    set_control_par(get_ui_id(UI2.pitchTable),$CONTROL_PAR_HEIGHT,200)    UI2.pitchTimeLength := 30    set_knob_defval(UI2.pitchTimeLength, UI2.pitchTimeLength)    set_text(UI2.pitchTimeLength, "Length (seconds)")    UI2.pitchRange := 400    set_knob_defval(UI2.pitchRange, UI2.pitchRange)    set_text(UI2.pitchRange, "Pitch Range (halftones)")    UI2.pitchTableSmooth := 0    set_text(UI2.pitchTableSmooth, "Smooth")    UI2.pitchTableReset := 0    set_text(UI2.pitchTableReset, "Clear")    UI2.pitchTableApply := 0    set_text(UI2.pitchTableApply, "Apply")    declare n := 0    declare i := 0    pgs_create_key(pgs_pitchTable, Const.pitchTableColumnCount)     pgs_create_key(pgs_pitchTableChanged, 1)     pgs_create_key(pgs_pitchTableIndex, 1)     pgs_create_key(pgs_pitchTableTimeLength, 1)     pgs_create_key(pgs_pitchTablePitchRange, 1) end onimport "import/Functions.ksp" as Funcson ui_control(UI2.pitchTable)end onon ui_control(UI2.pitchTableSmooth)    Funcs.smooth_array(UI2.pitchTable, 2)    UI2.pitchTableSmooth := 0end onon ui_control(UI2.pitchTableApply)    pitchTableChanged()    UI2.pitchTableApply := 0end onon ui_control(UI2.pitchTableReset)    for i := 0 to num_elements(UI2.pitchTable)-1        UI2.pitchTable[i] := 0    end for    UI2.pitchTableReset := 0end onfunction pitchTableChanged()    declare i    pgs_set_key_val(pgs_pitchTableIndex, 0, pitchTableIndex)    pgs_set_key_val(pgs_pitchTableChanged, 0, 0)    for i := 0 to num_elements(UI2.pitchTable)-1        pgs_set_key_val(pgs_pitchTable, i, UI2.pitchTable[i])    end for    pgs_set_key_val(pgs_pitchTableChanged, 0, 1)    pgs_set_key_val(pgs_pitchTableTimeLength, 0, UI2.pitchTimeLength)    pgs_set_key_val(pgs_pitchTablePitchRange, 0, UI2.pitchRange)    message("sent " & UI2.pitchTimeLength)end function