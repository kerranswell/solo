on init    {#pragma save_compiled_source solo-s2.txt}    set_script_title("S2")    make_perfview    set_ui_height_px(300)    message("test")    family UI2        declare ui_table pitchTable[128] (20,20,-1000)         declare ui_knob pitchTimeLength(1, 100, 10)        declare ui_knob pitchDepth(100, 800, 100)        declare ui_button pitchTableSmooth        declare ui_button pitchTableReset    end family        move_control_px(UI2.pitchTable,20,50)    set_control_par(get_ui_id(UI2.pitchTable),$CONTROL_PAR_WIDTH,580)    set_control_par(get_ui_id(UI2.pitchTable),$CONTROL_PAR_HEIGHT,200)    UI2.pitchTimeLength := 30    set_knob_defval(UI2.pitchTimeLength, UI2.pitchTimeLength)    set_text(UI2.pitchTimeLength, "Length (seconds)")    UI2.pitchDepth := 400    set_knob_defval(UI2.pitchDepth, UI2.pitchDepth)    set_text(UI2.pitchDepth, "Pitch Range (halftones)")    UI2.pitchTableSmooth := 0    set_text(UI2.pitchTableSmooth, "Smooth")    UI2.pitchTableReset := 0    set_text(UI2.pitchTableReset, "Clear")    declare n := 0    declare i := 0    pgs_create_key(pgs_pitchTable, 128)     pgs_create_key(pgs_pitchTableChanged, 1) end onimport "import/Functions.ksp" as Funcson ui_control(UI2.pitchTable)    pitchTableChanged()end onon ui_control(UI2.pitchTableSmooth)    Funcs.smooth_array(UI2.pitchTable, 2)    UI2.pitchTableSmooth := 0    pitchTableChanged()end onon ui_control(UI2.pitchTableReset)    for i := 0 to num_elements(UI2.pitchTable)-1        UI2.pitchTable[i] := 0    end for    UI2.pitchTableReset := 0    pitchTableChanged()end onfunction pitchTableChanged()    declare i    pgs_set_key_val(pgs_pitchTableChanged, 0, 0)    for i := 0 to num_elements(UI2.pitchTable)-1        pgs_set_key_val(pgs_pitchTable, i, UI2.pitchTable[i])    end for    pgs_set_key_val(pgs_pitchTableChanged, 0, 1)end function